<!DOCTYPE html>
<html>
<head>
    <title>Text Box with File Upload</title>
</head>
<body>
<h2>Enter your text:</h2>
<textarea id="myTextarea" rows="4" cols="50" placeholder="Type your message here..."></textarea>
<br>
<button onclick="postText()">Post Text</button>
<br><br>
<h2>Upload a picture:</h2>
<!-- Add a separate file upload input for pictures -->
<input type="file" id="fileInput" accept=".jpg, .jpeg">
<br>
<button onclick="uploadPicture()">Upload Picture</button>

<!-- Add an img element to display the uploaded image -->
<img id="uploadedImage" src="" alt="Uploaded Image" style="display: none;">
<br>

<script>
    function postText() {
        var text = document.getElementById("myTextarea").value;

        // You can handle the text posting logic here
        console.log("Text to post:", text);
    }

    function uploadPicture() {
        // Get the selected file
        var fileInput = document.getElementById("fileInput");
        var selectedFile = fileInput.files[0];

        if (!selectedFile) {
            alert("Please select a picture to upload.");
            return;
        }

        // Create a new FormData object to send the file with specific content type and name
        var formData = new FormData();
        var fileBlob = new Blob([selectedFile], { type: selectedFile.type });
        fileBlob.name = selectedFile.name;

        // Append the Blob to FormData
        formData.append("file", fileBlob);

        // Create a new XMLHttpRequest object
        var xhr = new XMLHttpRequest();

        // Configure the request
        xhr.open("POST", "/your_server_endpoint_for_uploading_pictures", true);

        // Define a callback function to handle the response from the server
        xhr.onreadystatechange = function () {
            if (xhr.readyState == 4 && xhr.status == 200) {
                var responseText = xhr.responseText;

                // Display the uploaded image on the page
                var uploadedImage = document.getElementById("uploadedImage");
                uploadedImage.src = responseText; // Assuming the server returns the URL of the uploaded image
                uploadedImage.style.display = "block"; // Show the image
            }
        };

        // Send the POST request with the FormData
        xhr.send(formData);
    }

</script>
</body>
</html>
